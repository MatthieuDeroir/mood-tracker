<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Mood Tracker</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container">
    <header>
        <h1>üìà Analytics</h1>
        <nav>
            <a href="/">Dashboard</a>
            <a href="/analytics" class="active">Analytics</a>
            <a href="/import">Import</a>
        </nav>
    </header>

    <main>
        <section class="analytics-controls">
            <div class="period-selector">
                <button class="period-btn active" data-period="week">Cette semaine</button>
                <button class="period-btn" data-period="month">Ce mois</button>
                <button class="period-btn" data-period="year">Cette ann√©e</button>
            </div>
        </section>

        <section class="analytics-overview">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Moyenne</h3>
                    <span class="stat-big" id="overallAvg">-</span>
                </div>
                <div class="stat-card">
                    <h3>Total entr√©es</h3>
                    <span class="stat-big" id="totalCount">-</span>
                </div>
                <div class="stat-card">
                    <h3>Meilleur mood</h3>
                    <span class="stat-big" id="bestMood">-</span>
                </div>
                <div class="stat-card">
                    <h3>Pire mood</h3>
                    <span class="stat-big" id="worstMood">-</span>
                </div>
            </div>
        </section>

        <section class="chart-container">
            <h2>√âvolution du mood</h2>
            <canvas id="moodChart" width="400" height="200"></canvas>
        </section>

        <!-- Section pour le sommeil -->
        <section class="chart-container" id="sleepChartContainer">
            <h2>Sommeil et Humeur</h2>
            <canvas id="sleepChart" width="400" height="200"></canvas>

            <div id="sleepMoodCorrelation" class="correlation-container">
                <!-- Contenu g√©n√©r√© dynamiquement -->
            </div>
        </section>

        <!-- Nouvelle section: Tableau des entr√©es -->
        <section class="entries-section">
            <div class="section-header">
                <h2>Toutes les entr√©es</h2>
                <button id="toggleEntriesBtn" class="toggle-btn">
                    <span class="arrow-icon">‚ñº</span>
                </button>
            </div>

            <div id="entriesTableContainer" class="hidden">
                <div class="table-controls">
                    <input type="text" id="entriesFilter" placeholder="Filtrer les entr√©es..." class="filter-input">
                    <select id="entriesSortBy" class="sort-select">
                        <option value="date-desc">Date (r√©cente d'abord)</option>
                        <option value="date-asc">Date (ancienne d'abord)</option>
                        <option value="mood-desc">Humeur (√©lev√©e d'abord)</option>
                        <option value="mood-asc">Humeur (basse d'abord)</option>
                    </select>
                </div>

                <div class="table-wrapper">
                    <table id="entriesTable" class="entries-table">
                        <thead>
                        <tr>
                            <th>Date</th>
                            <th>Heure</th>
                            <th>Humeur</th>
                            <th>Sommeil</th>
                            <th>M√©dicament</th>
                            <th>√âmotions</th>
                            <th>Note</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Contenu g√©n√©r√© dynamiquement -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination-controls">
                    <button id="prevPage" class="pagination-btn">Pr√©c√©dent</button>
                    <span id="pageInfo">Page 1</span>
                    <button id="nextPage" class="pagination-btn">Suivant</button>
                </div>
            </div>
        </section>

        <section class="patterns">
            <h2>Patterns d√©tect√©s</h2>
            <div id="patternsList">
                <div class="loading">Analyse en cours...</div>
            </div>
        </section>
    </main>
</div>

<script src="/static/js/analytics.js"></script>
</body>
</html>